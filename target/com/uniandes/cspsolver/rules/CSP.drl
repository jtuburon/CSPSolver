package com.uniandes.cspsolver

import java.util.ArrayList

rule "Show Variables"
	salience 1000
	when
		v: Variable()
	then
		System.out.println(v);
end


rule "Show Clues"
	salience 1000
	when
		c: SingleClue()
	then
		System.out.println(c);
end

rule "DirectAssignment"
	salience 500
	when
		c: SingleClue(relationship == "=", $v1: dstVar, value matches "\\d+")
		v1: Variable(name==c.dstVar, value != c.value, $g: group)
	then		
		retract(v1);
		System.out.println("Removed:" + v1);
end

rule "DirectAssignmentPropagation"
	salience 500
	when
		v: Variable()
		$values : ArrayList( size == 1 )
        	from collect(Variable (name== v.name))
        $var: Variable(group== v.group, value==v.value, name!= v.name)  
	then
		System.out.println("Removed:" + $var);
		retract($var);
end
